import numpy as np
import cv2
import os
import matplotlib.pyplot as plt

ddir = os.listdir(r'D:\File Photo\Ari\SAMSUNG 1\HST 60\Baris 6 hst 60 ari\Rename')
folderFile = r'D:\File Photo\Ari\SAMSUNG 1\HST 60\Baris 6 hst 60 ari\Rename'
dir_save = r'D:\File Photo\Ari\SAMSUNG 1\HST 60\Baris 6 hst 60 ari\Equalisasi\Hasil_Clahe'

for i in ddir:
    if i.endswith('jpg'):
        img_path = os.path.join(folderFile, i)
        img = cv2.imread(img_path)

        lab_img = cv2.cvtColor(img, cv2.COLOR_BGR2LAB)
        l, a, b = cv2.split(lab_img)

        clahe = cv2.createCLAHE(clipLimit=3.0, tileGridSize=(8,8))
        cl_l = clahe.apply(l)

        merged_img = cv2.merge((cl_l, a, b))

        final_img = cv2.cvtColor(merged_img, cv2.COLOR_LAB2RGB)

        nfol_hasil1 = os.path.join(dir_save, i)
        plt.imsave(nfol_hasil1, final_img)
